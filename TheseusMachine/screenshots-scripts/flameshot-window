#!/usr/bin/env bash
# Captura uma janela espec√≠fica usando Flameshot

# Diret√≥rio padr√£o de sa√≠da (pode alterar)
OUTDIR="$HOME/Pictures/Screenshots/"
mkdir -p "$OUTDIR"

# Nome do arquivo com timestamp
FILENAME="janela_$(date +'%Y-%m-%d_%H-%M-%S').png"
OUTFILE="$OUTDIR/$FILENAME"

# Seleciona a janela clicando nela
win_id=$(xdotool selectwindow) || exit 1

# Obt√©m posi√ß√£o e tamanho da janela
read x y w h < <(
  xwininfo -id "$win_id" |
  awk '/Absolute upper-left X|Absolute upper-left Y|Width|Height/ {print $NF}' |
  tr '\n' ' '
)

# Faz a captura
flameshot gui -r --region "$x,$y,$w,$h" > "$OUTFILE"

# Mostra caminho salvo
notify-send "üì∏ Captura salva" "$OUTFILE" || echo "Captura salva em: $OUTFILE"
